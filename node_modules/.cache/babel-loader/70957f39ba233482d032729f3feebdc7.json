{"ast":null,"code":"import _regeneratorRuntime from\"/Users/robertorossa/Desktop/Cursos/coderHouse/react-coderhouse-project/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/robertorossa/Desktop/Cursos/coderHouse/react-coderhouse-project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/robertorossa/Desktop/Cursos/coderHouse/react-coderhouse-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{clear}from'@testing-library/user-event/dist/clear';import React,{useContext,useState}from'react';import{Container,Button,Table}from'react-bootstrap';import{FaTrashAlt}from\"react-icons/fa\";import{Link}from'react-router-dom';import CartContext from'../../contexts/CartContext';import{createOrder}from'../../data/orders';import OrderModal from'../orderModal/index.js';import'./style.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var buyerMock={name:'Usuario',phone:'123456789',email:'test@gmail.com'};var Cart=function Cart(){var _useContext=useContext(CartContext),cart=_useContext.cart,total=_useContext.total,removeItem=_useContext.removeItem,clear=_useContext.clear;var _useState=useState(buyerMock),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setSer=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showModal=_useState4[0],setShowModal=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),orderId=_useState6[0],setOrderId=_useState6[1];console.log({cart:cart,total:total});var handleRemove=function handleRemove(itemId){removeItem(itemId);};var handleOpen=function handleOpen(){return setShowModal(true);};var handleClose=function handleClose(){return setShowModal(false);};var handleBuy=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var newOrder,newOrderId;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:newOrder={buyer:buyerMock,items:cart,total:total};_context.next=3;return createOrder(newOrder);case 3:newOrderId=_context.sent;setOrderId(newOrderId);clear();case 6:case\"end\":return _context.stop();}}},_callee);}));return function handleBuy(){return _ref.apply(this,arguments);};}();var showTable=cart.length>0;return/*#__PURE__*/_jsxs(Container,{className:\"cartContainer\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Carrito de Compras\"}),showTable&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Titulo\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Precio\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Cantidad\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Accion\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:cart.map(function(item){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.title}),/*#__PURE__*/_jsx(\"td\",{children:item.price}),/*#__PURE__*/_jsx(\"td\",{children:item.quantity}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(FaTrashAlt,{className:\"iconFaTrashAlt\",onClick:function onClick(){return handleRemove(item.id);}})})]},item.id);})})]}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Total: $ \",total]}),/*#__PURE__*/_jsx(Button,{variant:\"success\",onClick:handleOpen,children:\"Finalizar compra\"})]}),!showTable&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Carrito de compra vacio\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(Button,{variant:\"success\",children:\"Ver productos\"})})]}),/*#__PURE__*/_jsx(OrderModal,{showModal:showModal,onClose:handleClose,onBuy:handleBuy,orderId:orderId})]});};export default Cart;","map":{"version":3,"names":["clear","React","useContext","useState","Container","Button","Table","FaTrashAlt","Link","CartContext","createOrder","OrderModal","buyerMock","name","phone","email","Cart","cart","total","removeItem","user","setSer","showModal","setShowModal","orderId","setOrderId","console","log","handleRemove","itemId","handleOpen","handleClose","handleBuy","newOrder","buyer","items","newOrderId","showTable","length","map","item","title","price","quantity","id"],"sources":["/Users/robertorossa/Desktop/Cursos/coderHouse/react-coderhouse-project/src/components/cart/Cart.js"],"sourcesContent":["import { clear } from '@testing-library/user-event/dist/clear';\nimport React, { useContext, useState } from 'react';\nimport { Container, Button, Table } from 'react-bootstrap';\nimport { FaTrashAlt } from \"react-icons/fa\";\nimport { Link } from 'react-router-dom';\nimport CartContext from '../../contexts/CartContext';\nimport { createOrder } from '../../data/orders';\nimport OrderModal from '../orderModal/index.js';\nimport './style.css'\n\n\nconst buyerMock = {\n    name: 'Usuario',\n    phone: '123456789',\n    email: 'test@gmail.com'\n}\n\nconst Cart = () => {\n\n    const { cart, total, removeItem, clear } = useContext(CartContext);\n    const [user, setSer] = useState(buyerMock);\n    const [showModal, setShowModal] = useState(false);\n    const [orderId, setOrderId] = useState();\n    console.log({ cart, total });\n\n    const handleRemove = (itemId) => {\n        removeItem(itemId);\n    }\n\n    const handleOpen = () => setShowModal(true);\n\n    const handleClose = () => setShowModal(false);\n\n    const handleBuy = async () => {\n        const newOrder = {\n            buyer: buyerMock,\n            items: cart,\n            total\n        }\n        const newOrderId = await createOrder(newOrder);\n        setOrderId(newOrderId);\n        clear();\n    }\n\n    const showTable = cart.length > 0\n    return (\n        <Container className='cartContainer'>\n            <h1>Carrito de Compras</h1>\n            {showTable && (\n                <>\n                    <Table striped bordered hover>\n                        <thead>\n                            <tr>\n                                <th>Titulo</th>\n                                <th>Precio</th>\n                                <th>Cantidad</th>\n                                <th>Accion</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {cart.map((item) => (\n                                <tr key={item.id}>\n                                    <td>{item.title}</td>\n                                    <td>{item.price}</td>\n                                    <td>{item.quantity}</td>\n                                    <td><FaTrashAlt className='iconFaTrashAlt' onClick={() => handleRemove(item.id)} /></td>\n                                </tr>\n                            ))}\n                        </tbody>\n                    </Table>\n                    <h3>Total: $ {total}</h3>\n                    <Button variant=\"success\" onClick={handleOpen}>Finalizar compra</Button>\n                </>\n            )}\n            {!showTable && (\n                <>\n                    <h3>Carrito de compra vacio</h3>\n                    <Link to='/'>\n                        <Button variant=\"success\">Ver productos</Button>\n                    </Link>\n                </>\n            )}\n            <OrderModal\n                showModal={showModal}\n                onClose={handleClose}\n                onBuy={handleBuy}\n                orderId={orderId}\n            />\n\n        </Container>\n\n    );\n}\n\nexport default Cart;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}