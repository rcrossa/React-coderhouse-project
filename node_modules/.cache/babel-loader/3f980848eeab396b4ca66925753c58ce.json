{"ast":null,"code":"import _toConsumableArray from\"/Users/robertorossa/Desktop/Cursos/coderHouse/react-coderhouse-project/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/robertorossa/Desktop/Cursos/coderHouse/react-coderhouse-project/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/robertorossa/Desktop/Cursos/coderHouse/react-coderhouse-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{createContext,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";var CartContext=/*#__PURE__*/createContext({});export default CartContext;export var CartProvider=function CartProvider(_ref){var children=_ref.children;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),cart=_useState2[0],setCart=_useState2[1];var addItem=function addItem(product,quantity){if(!isInCart(product.id)){var item=_objectSpread(_objectSpread({},product),{},{quantity:quantity});setCart([].concat(_toConsumableArray(cart),[item]));}else{// actualizar quantity\n// buscamos el item en el carrito, en el array, su ubicacion para despues poder actualizar este item\nvar itemIndex=cart.findIndex(function(item){return item.id===parseInt(product.id);});// creamos un borrador del item para poder modificarlo y evidar la modificacion del estado de react\nvar itemDraft=_objectSpread({},cart[itemIndex]);// actualizamos la quantity en el borrador\nitemDraft.quantity=itemDraft.quantity+quantity;// creamos un borrador del carrito para poder actualizar el item\nvar cartDraft=_toConsumableArray(cart);// actualizamos el carrito borrador, SIN TOCAR EL ESTADO REACT\ncartDraft[itemIndex]=itemDraft;// cart[itemIndex] = itemDraft; PROHIBIDO, ya que modifica el estado de react\nsetCart(cartDraft);// VERSION CORTA, pero peligrosa, tocamos el estado react, mutacion\n// const item = cart.find((item) => item.id === parseInt(id));\n// item.quantity = item.quantity + quantity;\n// setCart([...cart]);\n}};var removeItem=function removeItem(itemId){var cartDraft=cart.filter(function(item){return item.id!==itemId;});setCart(cartDraft);};var clear=function clear(){setCart([]);};var isInCart=function isInCart(id){return cart.some(function(item){return item.id===parseInt(id);});};var total=cart.reduce(function(count,item){return count+item.price*item.quantity;},0);var totalQuantity=cart.reduce(function(count,item){return count+item.quantity;},0);return/*#__PURE__*/_jsx(CartContext.Provider,{value:{cart:cart,addItem:addItem,removeItem:removeItem,clear:clear,isInCart:isInCart,total:total,totalQuantity:totalQuantity},children:children});};","map":{"version":3,"names":["createContext","useState","CartContext","CartProvider","children","cart","setCart","addItem","product","quantity","isInCart","id","item","itemIndex","findIndex","parseInt","itemDraft","cartDraft","removeItem","itemId","filter","clear","some","total","reduce","count","price","totalQuantity"],"sources":["/Users/robertorossa/Desktop/Cursos/coderHouse/react-coderhouse-project/src/contexts/CartContext.js"],"sourcesContent":["import { createContext, useState } from \"react\";\n\nconst CartContext = createContext({});\n\nexport default CartContext;\n\nexport const CartProvider = ({ children }) => {\n    const [cart, setCart] = useState([]);\n\n    const addItem = (product, quantity) => {\n        if (!isInCart(product.id)) {\n            const item = {\n                ...product,\n                quantity\n            };\n            setCart([...cart, item]);\n        } else {\n            // actualizar quantity\n            // buscamos el item en el carrito, en el array, su ubicacion para despues poder actualizar este item\n            const itemIndex = cart.findIndex((item) => item.id === parseInt(product.id));\n            // creamos un borrador del item para poder modificarlo y evidar la modificacion del estado de react\n            const itemDraft = { ...cart[itemIndex] };\n            // actualizamos la quantity en el borrador\n            itemDraft.quantity = itemDraft.quantity + quantity;\n            // creamos un borrador del carrito para poder actualizar el item\n            const cartDraft = [...cart];\n            // actualizamos el carrito borrador, SIN TOCAR EL ESTADO REACT\n            cartDraft[itemIndex] = itemDraft;\n            // cart[itemIndex] = itemDraft; PROHIBIDO, ya que modifica el estado de react\n            setCart(cartDraft);\n\n            // VERSION CORTA, pero peligrosa, tocamos el estado react, mutacion\n            // const item = cart.find((item) => item.id === parseInt(id));\n            // item.quantity = item.quantity + quantity;\n            // setCart([...cart]);\n        }\n    }\n\n    const removeItem = (itemId) => {\n        const cartDraft = cart.filter((item) => item.id !== itemId);\n        setCart(cartDraft);\n    }\n\n    const clear = () => {\n        setCart([]);\n    }\n\n    const isInCart = (id) => cart.some((item) => item.id === parseInt(id));\n\n    const total = cart.reduce((count, item) => count + (item.price * item.quantity), 0);\n\n\n    const totalQuantity = cart.reduce((count, item) => count + item.quantity, 0);\n    return (\n        <CartContext.Provider value={{ cart, addItem, removeItem, clear, isInCart, total, totalQuantity }}>\n            {children}\n        </CartContext.Provider>\n    )\n};"],"mappings":"2dAAA,OAASA,aAAT,CAAwBC,QAAxB,KAAwC,OAAxC,C,2CAEA,GAAMC,YAAW,cAAGF,aAAa,CAAC,EAAD,CAAjC,CAEA,cAAeE,YAAf,CAEA,MAAO,IAAMC,aAAY,CAAG,QAAfA,aAAe,MAAkB,IAAfC,SAAe,MAAfA,QAAe,CAC1C,cAAwBH,QAAQ,CAAC,EAAD,CAAhC,wCAAOI,IAAP,eAAaC,OAAb,eAEA,GAAMC,QAAO,CAAG,QAAVA,QAAU,CAACC,OAAD,CAAUC,QAAV,CAAuB,CACnC,GAAI,CAACC,QAAQ,CAACF,OAAO,CAACG,EAAT,CAAb,CAA2B,CACvB,GAAMC,KAAI,gCACHJ,OADG,MAENC,QAAQ,CAARA,QAFM,EAAV,CAIAH,OAAO,8BAAKD,IAAL,GAAWO,IAAX,GAAP,CACH,CAND,IAMO,CACH;AACA;AACA,GAAMC,UAAS,CAAGR,IAAI,CAACS,SAAL,CAAe,SAACF,IAAD,QAAUA,KAAI,CAACD,EAAL,GAAYI,QAAQ,CAACP,OAAO,CAACG,EAAT,CAA9B,EAAf,CAAlB,CACA;AACA,GAAMK,UAAS,kBAAQX,IAAI,CAACQ,SAAD,CAAZ,CAAf,CACA;AACAG,SAAS,CAACP,QAAV,CAAqBO,SAAS,CAACP,QAAV,CAAqBA,QAA1C,CACA;AACA,GAAMQ,UAAS,oBAAOZ,IAAP,CAAf,CACA;AACAY,SAAS,CAACJ,SAAD,CAAT,CAAuBG,SAAvB,CACA;AACAV,OAAO,CAACW,SAAD,CAAP,CAEA;AACA;AACA;AACA;AACH,CACJ,CA3BD,CA6BA,GAAMC,WAAU,CAAG,QAAbA,WAAa,CAACC,MAAD,CAAY,CAC3B,GAAMF,UAAS,CAAGZ,IAAI,CAACe,MAAL,CAAY,SAACR,IAAD,QAAUA,KAAI,CAACD,EAAL,GAAYQ,MAAtB,EAAZ,CAAlB,CACAb,OAAO,CAACW,SAAD,CAAP,CACH,CAHD,CAKA,GAAMI,MAAK,CAAG,QAARA,MAAQ,EAAM,CAChBf,OAAO,CAAC,EAAD,CAAP,CACH,CAFD,CAIA,GAAMI,SAAQ,CAAG,QAAXA,SAAW,CAACC,EAAD,QAAQN,KAAI,CAACiB,IAAL,CAAU,SAACV,IAAD,QAAUA,KAAI,CAACD,EAAL,GAAYI,QAAQ,CAACJ,EAAD,CAA9B,EAAV,CAAR,EAAjB,CAEA,GAAMY,MAAK,CAAGlB,IAAI,CAACmB,MAAL,CAAY,SAACC,KAAD,CAAQb,IAAR,QAAiBa,MAAK,CAAIb,IAAI,CAACc,KAAL,CAAad,IAAI,CAACH,QAA5C,EAAZ,CAAmE,CAAnE,CAAd,CAGA,GAAMkB,cAAa,CAAGtB,IAAI,CAACmB,MAAL,CAAY,SAACC,KAAD,CAAQb,IAAR,QAAiBa,MAAK,CAAGb,IAAI,CAACH,QAA9B,EAAZ,CAAoD,CAApD,CAAtB,CACA,mBACI,KAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAE,CAAEJ,IAAI,CAAJA,IAAF,CAAQE,OAAO,CAAPA,OAAR,CAAiBW,UAAU,CAAVA,UAAjB,CAA6BG,KAAK,CAALA,KAA7B,CAAoCX,QAAQ,CAARA,QAApC,CAA8Ca,KAAK,CAALA,KAA9C,CAAqDI,aAAa,CAAbA,aAArD,CAA7B,UACKvB,QADL,EADJ,CAKH,CApDM"},"metadata":{},"sourceType":"module"}