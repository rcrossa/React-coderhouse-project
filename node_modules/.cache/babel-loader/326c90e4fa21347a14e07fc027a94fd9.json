{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.calculateNewValue = calculateNewValue;\n\nvar _selectionRange = require(\"./selectionRange\");\n\nvar _getValue2 = require(\"./getValue\");\n\nvar _isValidDateValue = require(\"./isValidDateValue\");\n\nvar _isValidInputTimeValue = require(\"./isValidInputTimeValue\");\n\nfunction calculateNewValue(newEntry, element) {\n  var value = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {\n    var _getValue;\n\n    return (_getValue = (0, _getValue2.getValue)(element)) != null ? _getValue :\n    /* istanbul ignore next */\n    '';\n  }();\n  var selectionRange = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : (0, _selectionRange.getSelectionRange)(element);\n  var deleteContent = arguments.length > 4 ? arguments[4] : undefined;\n  var selectionStart = selectionRange.selectionStart === null ? value.length : selectionRange.selectionStart;\n  var selectionEnd = selectionRange.selectionEnd === null ? value.length : selectionRange.selectionEnd;\n  var prologEnd = Math.max(0, selectionStart === selectionEnd && deleteContent === 'backward' ? selectionStart - 1 : selectionStart);\n  var prolog = value.substring(0, prologEnd);\n  var epilogStart = Math.min(value.length, selectionStart === selectionEnd && deleteContent === 'forward' ? selectionEnd + 1 : selectionEnd);\n  var epilog = value.substring(epilogStart, value.length);\n  var newValue = \"\".concat(prolog).concat(newEntry).concat(epilog);\n  var newSelectionStart = prologEnd + newEntry.length;\n\n  if (element.type === 'date' && !(0, _isValidDateValue.isValidDateValue)(element, newValue)) {\n    newValue = value;\n  }\n\n  if (element.type === 'time' && !(0, _isValidInputTimeValue.isValidInputTimeValue)(element, newValue)) {\n    if ((0, _isValidInputTimeValue.isValidInputTimeValue)(element, newEntry)) {\n      newValue = newEntry;\n    } else {\n      newValue = value;\n    }\n  }\n\n  return {\n    newValue: newValue,\n    newSelectionStart: newSelectionStart\n  };\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","calculateNewValue","_selectionRange","require","_getValue2","_isValidDateValue","_isValidInputTimeValue","newEntry","element","_getValue","getValue","selectionRange","getSelectionRange","deleteContent","selectionStart","length","selectionEnd","prologEnd","Math","max","prolog","substring","epilogStart","min","epilog","newValue","newSelectionStart","type","isValidDateValue","isValidInputTimeValue"],"sources":["/Users/robertorossa/Desktop/Cursos/coderHouse/react-coderhouse-project/node_modules/@testing-library/user-event/dist/utils/edit/calculateNewValue.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.calculateNewValue = calculateNewValue;\n\nvar _selectionRange = require(\"./selectionRange\");\n\nvar _getValue2 = require(\"./getValue\");\n\nvar _isValidDateValue = require(\"./isValidDateValue\");\n\nvar _isValidInputTimeValue = require(\"./isValidInputTimeValue\");\n\nfunction calculateNewValue(newEntry, element, value = (() => {\n  var _getValue;\n\n  return (_getValue = (0, _getValue2.getValue)(element)) != null ? _getValue :\n  /* istanbul ignore next */\n  '';\n})(), selectionRange = (0, _selectionRange.getSelectionRange)(element), deleteContent) {\n  const selectionStart = selectionRange.selectionStart === null ? value.length : selectionRange.selectionStart;\n  const selectionEnd = selectionRange.selectionEnd === null ? value.length : selectionRange.selectionEnd;\n  const prologEnd = Math.max(0, selectionStart === selectionEnd && deleteContent === 'backward' ? selectionStart - 1 : selectionStart);\n  const prolog = value.substring(0, prologEnd);\n  const epilogStart = Math.min(value.length, selectionStart === selectionEnd && deleteContent === 'forward' ? selectionEnd + 1 : selectionEnd);\n  const epilog = value.substring(epilogStart, value.length);\n  let newValue = `${prolog}${newEntry}${epilog}`;\n  const newSelectionStart = prologEnd + newEntry.length;\n\n  if (element.type === 'date' && !(0, _isValidDateValue.isValidDateValue)(element, newValue)) {\n    newValue = value;\n  }\n\n  if (element.type === 'time' && !(0, _isValidInputTimeValue.isValidInputTimeValue)(element, newValue)) {\n    if ((0, _isValidInputTimeValue.isValidInputTimeValue)(element, newEntry)) {\n      newValue = newEntry;\n    } else {\n      newValue = value;\n    }\n  }\n\n  return {\n    newValue,\n    newSelectionStart\n  };\n}"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAC3CC,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,iBAAR,GAA4BA,iBAA5B;;AAEA,IAAIC,eAAe,GAAGC,OAAO,CAAC,kBAAD,CAA7B;;AAEA,IAAIC,UAAU,GAAGD,OAAO,CAAC,YAAD,CAAxB;;AAEA,IAAIE,iBAAiB,GAAGF,OAAO,CAAC,oBAAD,CAA/B;;AAEA,IAAIG,sBAAsB,GAAGH,OAAO,CAAC,yBAAD,CAApC;;AAEA,SAASF,iBAAT,CAA2BM,QAA3B,EAAqCC,OAArC,EAMuF;EAAA,IANzCR,KAMyC,uEANhC,YAAM;IAC3D,IAAIS,SAAJ;;IAEA,OAAO,CAACA,SAAS,GAAG,CAAC,GAAGL,UAAU,CAACM,QAAf,EAAyBF,OAAzB,CAAb,KAAmD,IAAnD,GAA0DC,SAA1D;IACP;IACA,EAFA;EAGD,CANqD,EAMiC;EAAA,IAAjFE,cAAiF,uEAAhE,CAAC,GAAGT,eAAe,CAACU,iBAApB,EAAuCJ,OAAvC,CAAgE;EAAA,IAAfK,aAAe;EACrF,IAAMC,cAAc,GAAGH,cAAc,CAACG,cAAf,KAAkC,IAAlC,GAAyCd,KAAK,CAACe,MAA/C,GAAwDJ,cAAc,CAACG,cAA9F;EACA,IAAME,YAAY,GAAGL,cAAc,CAACK,YAAf,KAAgC,IAAhC,GAAuChB,KAAK,CAACe,MAA7C,GAAsDJ,cAAc,CAACK,YAA1F;EACA,IAAMC,SAAS,GAAGC,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYL,cAAc,KAAKE,YAAnB,IAAmCH,aAAa,KAAK,UAArD,GAAkEC,cAAc,GAAG,CAAnF,GAAuFA,cAAnG,CAAlB;EACA,IAAMM,MAAM,GAAGpB,KAAK,CAACqB,SAAN,CAAgB,CAAhB,EAAmBJ,SAAnB,CAAf;EACA,IAAMK,WAAW,GAAGJ,IAAI,CAACK,GAAL,CAASvB,KAAK,CAACe,MAAf,EAAuBD,cAAc,KAAKE,YAAnB,IAAmCH,aAAa,KAAK,SAArD,GAAiEG,YAAY,GAAG,CAAhF,GAAoFA,YAA3G,CAApB;EACA,IAAMQ,MAAM,GAAGxB,KAAK,CAACqB,SAAN,CAAgBC,WAAhB,EAA6BtB,KAAK,CAACe,MAAnC,CAAf;EACA,IAAIU,QAAQ,aAAML,MAAN,SAAeb,QAAf,SAA0BiB,MAA1B,CAAZ;EACA,IAAME,iBAAiB,GAAGT,SAAS,GAAGV,QAAQ,CAACQ,MAA/C;;EAEA,IAAIP,OAAO,CAACmB,IAAR,KAAiB,MAAjB,IAA2B,CAAC,CAAC,GAAGtB,iBAAiB,CAACuB,gBAAtB,EAAwCpB,OAAxC,EAAiDiB,QAAjD,CAAhC,EAA4F;IAC1FA,QAAQ,GAAGzB,KAAX;EACD;;EAED,IAAIQ,OAAO,CAACmB,IAAR,KAAiB,MAAjB,IAA2B,CAAC,CAAC,GAAGrB,sBAAsB,CAACuB,qBAA3B,EAAkDrB,OAAlD,EAA2DiB,QAA3D,CAAhC,EAAsG;IACpG,IAAI,CAAC,GAAGnB,sBAAsB,CAACuB,qBAA3B,EAAkDrB,OAAlD,EAA2DD,QAA3D,CAAJ,EAA0E;MACxEkB,QAAQ,GAAGlB,QAAX;IACD,CAFD,MAEO;MACLkB,QAAQ,GAAGzB,KAAX;IACD;EACF;;EAED,OAAO;IACLyB,QAAQ,EAARA,QADK;IAELC,iBAAiB,EAAjBA;EAFK,CAAP;AAID"},"metadata":{},"sourceType":"script"}